<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="clr-namespace:JetJot.Models"
        xmlns:local="clr-namespace:JetJot"
        mc:Ignorable="d"
        d:DesignWidth="1000"
        d:DesignHeight="600"
        x:Class="JetJot.MainWindow"
        Title="JetJot"
        Background="#1E1E1E"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="40">


    <Grid x:Name="MainOuterGrid" RowDefinitions="40,*,40">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Custom Title Bar -->
        <Border x:Name="TitleBarPanel" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Background="#2D2D2D">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- Left: Menu -->
                <Menu Grid.Column="0" Background="Transparent" VerticalAlignment="Center" Focusable="False">
                    <Menu.Styles>
                        <Style Selector="MenuItem">
                            <Setter Property="Focusable" Value="False"/>
                        </Style>
                    </Menu.Styles>
                    <MenuItem x:Name="FileMenu" Header="File" Foreground="#FFFFFF">
                        <MenuItem Header="New Manuscript" Click="OnNewManuscriptMenuClicked"/>
                        <MenuItem Header="Open/Import Manuscript..." Click="OnImportManuscriptClicked"/>
                        <Separator/>
                        <MenuItem Header="New Document" Click="OnNewDocumentClicked"/>
                        <Separator/>
                        <MenuItem Header="Exit" Click="OnExitClicked"/>
                    </MenuItem>
                    <MenuItem Header="Edit" Foreground="#FFFFFF">
                        <MenuItem Header="Rename Manuscript" Click="OnRenameManuscriptMenuClicked"/>
                        <MenuItem Header="Rename Document" Click="OnRenameDocumentMenuClicked"/>
                        <Separator/>
                        <MenuItem Header="Undo" Click="OnUndoClicked"/>
                        <MenuItem Header="Redo" Click="OnRedoClicked"/>
                        <Separator/>
                        <MenuItem Header="Cut" Click="OnCutClicked"/>
                        <MenuItem Header="Copy" Click="OnCopyClicked"/>
                        <MenuItem Header="Paste" Click="OnPasteClicked"/>
                    </MenuItem>
                    <MenuItem Header="View" Foreground="#FFFFFF">
                        <MenuItem x:Name="MenuTypewriterMode" Header="Typewriter Mode" Click="OnToggleTypewriterMode">
                            <MenuItem.Icon>
                                <CheckBox x:Name="CheckTypewriterMode" IsChecked="False" IsHitTestVisible="False"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuFocusMode" Header="Focus Mode" Click="OnToggleFocusMode">
                            <MenuItem.Icon>
                                <CheckBox x:Name="CheckFocusMode" IsChecked="False" IsHitTestVisible="False"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuSuperFocusMode" Header="Super Focus Mode (F11)" Click="OnToggleSuperFocusMode">
                            <MenuItem.Icon>
                                <CheckBox x:Name="CheckSuperFocusMode" IsChecked="False" IsHitTestVisible="False"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuShowToolbar" Header="Show Toolbar" Click="OnToggleToolbar">
                            <MenuItem.Icon>
                                <CheckBox x:Name="CheckToolbar" IsChecked="True" IsHitTestVisible="False"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuShowSidebar" Header="Show Manuscript View" Click="OnToggleSidebar">
                            <MenuItem.Icon>
                                <CheckBox x:Name="CheckSidebar" IsChecked="True" IsHitTestVisible="False"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuShowFooter" Header="Show Progress Bar" Click="OnToggleFooter">
                            <MenuItem.Icon>
                                <CheckBox x:Name="CheckFooter" IsChecked="True" IsHitTestVisible="False"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <MenuItem Header="Help" Foreground="#FFFFFF">
                        <MenuItem Header="About" Click="OnAboutClicked"/>
                    </MenuItem>
                </Menu>

                <!-- Center: Title with Logo (draggable area) -->
                <Border x:Name="TitleBar" Grid.Column="1" Background="Transparent">
                    <StackPanel Orientation="Horizontal"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                IsHitTestVisible="False">
                        <Image Source="avares://JetJot/Logo.png"
                               Height="24"
                               Margin="0,0,8,0"
                               VerticalAlignment="Center"/>
                        <TextBlock Text="JetJot - Let Your Writing Fly"
                                  Foreground="#CCCCCC"
                                  FontSize="13"
                                  FontWeight="Normal"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- Right: Window Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="0">
                    <Button x:Name="MinimizeButton"
                            Content="â”€"
                            Width="46"
                            Height="40"
                            Background="Transparent"
                            Foreground="#FFFFFF"
                            BorderThickness="0"
                            FontSize="10"
                            Click="OnMinimizeClick"/>
                    <Button x:Name="MaximizeButton"
                            Content="â–¡"
                            Width="46"
                            Height="40"
                            Background="Transparent"
                            Foreground="#FFFFFF"
                            BorderThickness="0"
                            FontSize="12"
                            Click="OnMaximizeClick"/>
                    <Button x:Name="CloseButton"
                            Content="âœ•"
                            Width="46"
                            Height="40"
                            Background="Transparent"
                            Foreground="#FFFFFF"
                            BorderThickness="0"
                            FontSize="12"
                            Click="OnCloseClick">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="#E81123"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <Grid x:Name="MainGrid" Grid.Row="1" Grid.RowSpan="2" Grid.Column="0" Grid.ColumnSpan="2" RowDefinitions="*,40">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

        <!-- ========================= -->
        <!-- Sidebar -->
        <!-- ========================= -->
        <Border x:Name="SidebarPanel"
                Grid.Row="0"
                Grid.Column="0"
                Background="#2A2A2A"
                BorderBrush="#3A3A3A"
                BorderThickness="0,0,1,0">

            <Grid RowDefinitions="Auto,*,Auto">

                <!-- Top Section (Anchored) -->
                <StackPanel Grid.Row="0" Margin="12,12,12,0">
                    <Border Padding="12,8"
                            Background="Transparent"
                            CornerRadius="4"
                            Margin="0,0,0,12"
                            DoubleTapped="OnManuscriptNameDoubleTapped"
                            Cursor="Hand"
                            x:DataType="local:Manuscript">
                        <Border.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Rename" Click="OnRenameManuscriptClicked"/>
                            </ContextMenu>
                        </Border.ContextMenu>
                        <Border.Styles>
                            <Style Selector="Border:pointerover">
                                <Setter Property="Background" Value="#3A3A3A"/>
                            </Style>
                        </Border.Styles>
                        <TextBlock x:Name="ManuscriptNameText"
                                   Text="{Binding Name}"
                                   Foreground="#FFFFFF"
                                   FontSize="14"
                                   HorizontalAlignment="Center"/>
                    </Border>

                    <Button x:Name="NewDocumentButton"
                            Content="+ New Document"
                            Background="#3A3A3A"
                            Foreground="#FFFFFF"
                            BorderThickness="0"
                            Padding="12,8"
                            Margin="0,0,0,12"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center"
                            CornerRadius="4"
                            Cursor="Hand"/>
                </StackPanel>

                <!-- Middle Section (Scrollable Document List) -->
                <ScrollViewer Grid.Row="1"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="12,0,12,0">
                        <ListBox
                            x:Name="DocumentList"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="#EAEAEA">
                            <ListBox.Styles>
                                <Style Selector="ListBoxItem">
                                    <Setter Property="Padding" Value="0"/>
                                </Style>
                            </ListBox.Styles>
                            <ListBox.ItemTemplate>
                                <DataTemplate DataType="models:Document">
                                    <Border x:Name="ItemContainer"
                                            Padding="4"
                                            Margin="0,1"
                                            Background="Transparent"
                                            CornerRadius="4"
                                            BorderThickness="0,2,0,0"
                                            BorderBrush="Transparent"
                                            PointerPressed="OnDocumentPointerPressed"
                                            PointerMoved="OnDocumentPointerMoved"
                                            PointerReleased="OnDocumentPointerReleased"
                                            DoubleTapped="OnDocumentItemDoubleTapped">
                                        <Border.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="Rename" Click="OnRenameMenuClicked"/>
                                                <Separator/>
                                                <MenuItem Header="Move Up" Click="OnMoveUpClicked"/>
                                                <MenuItem Header="Move Down" Click="OnMoveDownClicked"/>
                                                <Separator/>
                                                <MenuItem Header="Delete" Click="OnDeleteMenuClicked"/>
                                            </ContextMenu>
                                        </Border.ContextMenu>
                                        <TextBlock Text="{Binding Title}"
                                                   VerticalAlignment="Center"/>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </ScrollViewer>

                <!-- Bottom Section (Anchored Trash Icon) -->
                <Border Grid.Row="2"
                        x:Name="TrashZone"
                        Background="#2A2A2A"
                        BorderBrush="#3A3A3A"
                        BorderThickness="0,1,0,0"
                        Padding="12"
                        Margin="0"
                        PointerEntered="OnTrashZonePointerEnter"
                        PointerExited="OnTrashZonePointerLeave">
                    <StackPanel Orientation="Horizontal"
                               HorizontalAlignment="Center"
                               Spacing="8">
                        <TextBlock Text="ðŸ—‘ï¸"
                                  FontSize="20"
                                  VerticalAlignment="Center"/>
                        <TextBlock Text="Drop to Delete"
                                  Foreground="#888888"
                                  FontSize="12"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

            </Grid>
        </Border>

        <!-- ========================= -->
        <!-- Editor Area -->
        <!-- ========================= -->
        <Border x:Name="EditorAreaBorder"
                Grid.Row="0"
                Grid.Column="1"
                Padding="20">

            <Border x:Name="EditorInnerBorder"
                    Background="#252525"
                    CornerRadius="6"
                    Padding="0">

                <Grid RowDefinitions="Auto,*">

                    <!-- Formatting Toolbar -->
                    <Border x:Name="ToolbarPanel"
                            Grid.Row="0"
                            Background="#2D2D2D"
                            BorderBrush="#3A3A3A"
                            BorderThickness="0,0,0,1"
                            Padding="12,8">

                        <Grid ColumnDefinitions="*,Auto">
                            <!-- Left side: Formatting buttons -->
                            <StackPanel Grid.Column="0"
                                       Orientation="Horizontal"
                                       Spacing="8">

                                <Button Content="B"
                                        Width="32"
                                        Height="32"
                                        FontWeight="Bold"
                                        ToolTip.Tip="Bold (Coming Soon)"
                                        IsEnabled="False"
                                        Background="#3A3A3A"
                                        Foreground="#888888"/>

                                <Button Content="I"
                                        Width="32"
                                        Height="32"
                                        FontStyle="Italic"
                                        ToolTip.Tip="Italic (Coming Soon)"
                                        IsEnabled="False"
                                        Background="#3A3A3A"
                                        Foreground="#888888"/>

                                <Separator Width="1" Background="#3A3A3A" Margin="4,0"/>

                                <Button Content="â‰¡"
                                        Width="32"
                                        Height="32"
                                        ToolTip.Tip="Align Left (Coming Soon)"
                                        IsEnabled="False"
                                        Background="#3A3A3A"
                                        Foreground="#888888"/>

                                <Button Content="â‰¡"
                                        Width="32"
                                        Height="32"
                                        ToolTip.Tip="Align Center (Coming Soon)"
                                        IsEnabled="False"
                                        Background="#3A3A3A"
                                        Foreground="#888888"/>

                                <Button Content="â‰¡"
                                        Width="32"
                                        Height="32"
                                        ToolTip.Tip="Align Right (Coming Soon)"
                                        IsEnabled="False"
                                        Background="#3A3A3A"
                                        Foreground="#888888"/>
                            </StackPanel>

                            <!-- Right side: Font size -->
                            <StackPanel Grid.Column="1"
                                       Orientation="Horizontal"
                                       Spacing="8">
                                <TextBlock Text="Font Size:"
                                          VerticalAlignment="Center"
                                          Foreground="#CCCCCC"/>
                                <ComboBox x:Name="FontSizeComboBox"
                                         Width="80"
                                         SelectedIndex="2">
                                    <ComboBoxItem Content="12"/>
                                    <ComboBoxItem Content="14"/>
                                    <ComboBoxItem Content="16"/>
                                    <ComboBoxItem Content="18"/>
                                    <ComboBoxItem Content="20"/>
                                    <ComboBoxItem Content="24"/>
                                    <ComboBoxItem Content="28"/>
                                    <ComboBoxItem Content="32"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Text Editor -->
                    <Border Grid.Row="1" Padding="0">
                        <TextBox
                            x:Name="Editor"
                            AcceptsReturn="True"
                            AcceptsTab="True"
                            FontSize="16"
                            FontFamily="Segoe UI"
                            Background="Transparent"
                            Foreground="#EAEAEA"
                            BorderThickness="0"
                            TextWrapping="Wrap"
                            CaretBrush="#FFFFFF"
                            SelectionBrush="#4C8DFF"
                            SelectionForegroundBrush="#FFFFFF">
                            <TextBox.Styles>
                                <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                </Style>
                            </TextBox.Styles>
                        </TextBox>
                    </Border>

                </Grid>

            </Border>
        </Border>

        <!-- ========================= -->
        <!-- Footer -->
        <!-- ========================= -->
        <Border x:Name="FooterPanel"
                Grid.Row="1"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                Background="#2D2D2D"
                BorderBrush="#3A3A3A"
                BorderThickness="0,1,0,0"
                Padding="20,0">

            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- Word count text -->
                <TextBlock Grid.Column="0"
                          x:Name="WordCountText"
                          Text="0 / 1000 words"
                          Foreground="#CCCCCC"
                          VerticalAlignment="Center"
                          FontSize="12"/>

                <!-- Progress bar -->
                <ProgressBar Grid.Column="1"
                            x:Name="WordProgressBar"
                            Minimum="0"
                            Maximum="1000"
                            Value="0"
                            Height="8"
                            Margin="16,0"
                            VerticalAlignment="Center"
                            Foreground="#4CAF50"
                            Background="#3A3A3A"/>

                <!-- Goal setter button -->
                <Button Grid.Column="2"
                       x:Name="SetGoalButton"
                       Content="Set Goal"
                       Padding="12,6"
                       FontSize="12"
                       Background="#3A3A3A"
                       Foreground="#FFFFFF"
                       BorderThickness="0"
                       CornerRadius="4"
                       Cursor="Hand"/>
            </Grid>
        </Border>

        </Grid>

        <!-- Super Focus Mode Exit Hint Overlay -->
        <Border x:Name="SuperFocusHintOverlay"
                Grid.Row="0"
                Grid.RowSpan="3"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                Background="Transparent"
                IsVisible="False"
                IsHitTestVisible="False">
            <Border Background="#AA000000"
                    Padding="24,12"
                    CornerRadius="8"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Margin="0,40,0,0">
                <TextBlock Text="Press Escape to Exit"
                          Foreground="#FFFFFF"
                          FontSize="16"
                          FontWeight="SemiBold"/>
            </Border>
        </Border>
    </Grid>
</Window>